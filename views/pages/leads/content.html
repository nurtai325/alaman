{{ block "leads-content" . }}
{{ $users := .Users }}
<div class="p-1">
	<section class="flex justify-around">
		{{if or (eq .Role "админ") (eq .Role "роп")}}
		<h4 class="items-center text-lg flex w-full text-center font-semibold text-blue-400" id="new-header">
			<span class="w-36"></span>
			<div class="items-center text-lg flex text-center font-semibold text-blue-400">
				Жаңа
			</div>
			<button hx-get="/leads/new" hx-swap="afterbegin" hx-target="#new"
				class="ml-2 rounded-lg p-1 bg-blue-400 text-white text-sm">қосу</button>
		</h4>
		{{ end }}
		<h4 class="text-lg w-full text-center font-semibold text-yellow-400" id="assigned-header">Тағайындалды</h4>
		<h4 class="text-lg w-full text-center font-semibold text-orange-400" id="in-progress-header">Жеткізілуде</h4>
		<h4 class="text-lg w-full text-center font-semibold text-green-400" id="ready-header">Дайын</h4>
	</section>
	<section class="flex h-full">
		{{ if or (eq .Role "админ") (eq .Role "роп") }}
		<section class="overflow-auto bg-blue-100 h-[84lvh] {{if or (eq .Role "админ") (eq .Role "роп")}} w-1/4 {{ else }} w-96 ml-24 {{ end }} mx-4 my-4 border border-[#4A5568] rounded-2xl"
			id="new">
			{{ range .New }}
			<div id="lead-cell-{{ .Id }}"
				class="lead-cell pl-6 task mx-4 my-3 bg-blue-500 p-4 rounded-2xl text-lg text-white">
				<div>{{ .Phone }}</div>
				<div class="flex mt-1 mb-1">
					<select class="bg-white text-black rounded-sm mr-2" name="user_id" required>
						<option class="hidden" disabled selected value></option>
						{{ range $users }}
						<option class="text-center" value="{{ .Id }}">
							{{ .Name }}
						</option>
						{{ end }}
					</select>
					<button hx-put="/leads/{{ .Id }}/assign" hx-include="closest div" hx-swap="afterbegin"
						hx-target="#assigned" class="p-1 bg-green-600 text-white text-sm">сақтау</button>
				</div>
			</div>
			{{ end }}
		</section>
		{{ end }}
		<section class="overflow-auto bg-blue-100 h-[84lvh] {{ if or (eq .Role "админ") (eq .Role "роп") }} w-1/4 {{ else }} w-96 ml-20 {{ end }} mx-4 my-4 border border-[#4A5568] rounded-2xl"
			id="assigned">
			{{ range .Assigned }}
			{{ template "lead-cell-assigned" . }}
			{{ end }}
		</section>
		<section class="overflow-auto bg-blue-100 h-[84lvh] {{ if or (eq .Role "админ") (eq .Role "роп") }} w-1/4 {{ else }} w-96 ml-32 {{ end }} mx-4 my-4 border border-[#4A5568] rounded-2xl"
			id="in-progress">
			{{ range .InDelivery }}
			{{ template "lead-cell-in-delivery" . }}
			{{ end }}
		</section>
		<section class="overflow-auto bg-blue-100 h-[84lvh] {{ if or (eq .Role "админ") (eq .Role "роп") }} w-1/4 {{ else }} w-96 ml-32 {{ end }} mx-4 my-4 border border-[#4A5568] rounded-2xl"
			id="ready" ondrop="drop(event)" ondragover="allowdrop(event)">
			{{ range .Completed }}
			{{ template "lead-cell-completed" . }}
			{{ end }}
		</section>
	</section>
	<span id="lead-cell-errors"></span>
</div>
{{ end }}
